"""
Xelis Mining Client Implementation

This module implements a Stratum mining client for the Xelis cryptocurrency.
It handles connection to mining pools, job management, and proof-of-work calculations.
"""

from __future__ import print_function

# Standard library imports
import os
import sys
import time
import json
import random
import struct
import hashlib
import binascii
import threading
import multiprocessing
from re import S as AD
from concurrent.futures import ThreadPoolExecutor

# Third-party imports
import websocket

# Constants for Stratum protocol messages and parameters
SHARED = 'shared'
HASHRATE = 'hashrate'
MAX_NONCE = 'max_nonce'
EXTRANONCE2_SIZE = 'extranonce2_size'
EXTRANONCE1 = 'extranonce1'
TARGET = 'target'
NBITS = 'nbits'
VERSION = 'version'
MERKLE_BRANCHES = 'merkle_branches'
COINB2 = 'coinb2'
COINB1 = 'coinb1'
PREVHASH = 'prevhash'
HEX_FORMAT = '%064x'
FALSE = False
PORT = 'port'
PRINT_FUNC = print
TUPLE_TYPE = tuple
VALUE_ERROR = ValueError
MINING_SUBMIT = 'mining.submit'
MINING_SUBSCRIBE = 'mining.subscribe'
NTIME = 'ntime'
JOB_ID = 'job_id'
THREADS = 'threads'
RANGE_FUNC = range
ISINSTANCE_FUNC = isinstance
EXCEPTION_TYPE = Exception
NEWLINE = '\n'
LEN_FUNC = len
PARAMS = 'params'
METHOD = 'method'
ID = 'id'
TRUE = True
INT_FUNC = int
NONE = None
PROPERTY_DECORATOR = property

# Add libs directory to path for custom hash implementations
LIBS_PATH = os.path.abspath('./libs')
sys.path.append(LIBS_PATH)

# Algorithm configuration
ALGORITHM_NAME = 'xelisv2_pepew'
SUPPORTED_ALGORITHMS = [ALGORITHM_NAME]
def load_config(file_path):
    """
    Load mining configuration from a file.
    
    Args:
        file_path (str): Path to the configuration file
        
    Returns:
        dict: Configuration parameters including:
            - proxy: WebSocket proxy URL
            - host: Mining pool host
            - port: Mining pool port
            - username: Mining worker username
            - password: Mining worker password
            - threads: Number of mining threads
    """
    config = {}
    with open(file_path, 'r') as file:
        for line in file:
            key, value = line.strip().split('=', 1)
            if key == PORT:
                value = INT_FUNC(value)
            elif key == THREADS:
                if value.startswith('['):
                    value = json.loads(value)
                else:
                    value = INT_FUNC(value)
            config[key] = value
    return config

def format_hashrate(hashrate):
    """
    Format hashrate into human-readable format.
    
    Args:
        hashrate (float): Hashrate in hashes per second
        
    Returns:
        str: Formatted hashrate string (e.g., "1.23 MH/s")
    """
    if hashrate < 1000:
        return f'{hashrate:.2f} B/s'
    if hashrate < 10000000:
        return f'{hashrate/1000:.2f} KB/s'
    if hashrate < 10000000000:
        return f'{hashrate/1000000:.2f} MB/s'
    return f'{hashrate/1000000000:.2f} GB/s'

# Utility functions for hex and binary data manipulation
def hexlify(data):
    """Convert binary data to hex string."""
    return binascii.hexlify(data)

def unhexlify(hex_string):
    """Convert hex string to binary data."""
    return binascii.unhexlify(hex_string)

def double_sha256(message):
    """Apply double SHA256 hash (Bitcoin-style)."""
    return hashlib.sha256(hashlib.sha256(message).digest()).digest()

def format_hex_item(item):
    """Format item as padded hex string."""
    if ISINSTANCE_FUNC(item, bytes):
        hex_str = item.hex()
        hex_str = hex_str.zfill(8)
        return hex_str
    else:
        return item

def reverse_hex_word(hex_word):
    """Reverse byte order of a 4-byte hex word."""
    data = unhexlify(hex_word)
    if LEN_FUNC(data) != 4:
        raise VALUE_ERROR('Must be 4-byte word')
    return data[::-1]

def reverse_hex_words(hex_words):
    """Reverse byte order of multiple 4-byte hex words."""
    data = unhexlify(hex_words)
    if LEN_FUNC(data) % 4 != 0:
        raise VALUE_ERROR('Must be 4-byte word aligned')
    result = b''.join([data[4*i:4*i+4][::-1] for i in RANGE_FUNC(LEN_FUNC(data)//4)])
    return result
class MiningJob:
    """
    Represents a mining job with all necessary parameters for block mining.
    
    This class handles the core mining logic including:
    - Merkle root calculation
    - Block header construction
    - Nonce iteration
    - Proof-of-work verification
    """
    
    def __init__(self, job_id, prevhash, coinb1, coinb2, merkle_branches, version, 
                 nbits, ntime, target, extranonce1, extranonce2_size, proof_of_work, 
                 max_nonce=4294967295):
        """
        Initialize a new mining job.
        
        Args:
            job_id (str): Unique identifier for the mining job
            prevhash (str): Previous block hash
            coinb1 (str): First part of coinbase transaction
            coinb2 (str): Second part of coinbase transaction
            merkle_branches (list): Merkle tree branches
            version (str): Block version
            nbits (str): Network difficulty bits
            ntime (str): Block timestamp
            target (str): Mining target difficulty
            extranonce1 (str): First part of extranonce
            extranonce2_size (int): Size of extranonce2 in bytes
            proof_of_work (callable): Function to calculate proof-of-work hash
            max_nonce (int): Maximum nonce value for mining
        """
        self._job_id = job_id
        self._prevhash = prevhash
        self._coinb1 = coinb1
        self._coinb2 = coinb2
        self._merkle_branches = [branch for branch in merkle_branches]
        self._version = version
        self._nbits = nbits
        self._ntime = ntime
        self._max_nonce = max_nonce
        self._target = target
        self._extranonce1 = extranonce1
        self._extranonce2_size = extranonce2_size
        self._proof_of_work = proof_of_work
        self._done = FALSE
        self._dt = 0.0
        self._hash_count = 0

    # Properties for accessing job parameters
    id = PROPERTY_DECORATOR(lambda s: s._job_id)
    prevhash = PROPERTY_DECORATOR(lambda s: s._prevhash)
    coinb1 = PROPERTY_DECORATOR(lambda s: s._coinb1)
    coinb2 = PROPERTY_DECORATOR(lambda s: s._coinb2)
    merkle_branches = PROPERTY_DECORATOR(lambda s: [branch for branch in s._merkle_branches])
    version = PROPERTY_DECORATOR(lambda s: s._version)
    nbits = PROPERTY_DECORATOR(lambda s: s._nbits)
    ntime = PROPERTY_DECORATOR(lambda s: s._ntime)
    target = PROPERTY_DECORATOR(lambda s: s._target)
    extranonce1 = PROPERTY_DECORATOR(lambda s: s._extranonce1)
    extranonce2_size = PROPERTY_DECORATOR(lambda s: s._extranonce2_size)
    proof_of_work = PROPERTY_DECORATOR(lambda s: s._proof_of_work)

    @PROPERTY_DECORATOR
    def hashrate(self):
        """
        Calculate current hashrate based on hash count and elapsed time.
        
        Returns:
            float: Current hashrate in hashes per second
        """
        if self._dt == 0:
            return 0.0
        return self._hash_count / self._dt

    def merkle_root_bin(self, extranonce2_bin):
        """
        Calculate merkle root in binary format.
        
        Args:
            extranonce2_bin (bytes): Binary extranonce2 value
            
        Returns:
            bytes: Binary merkle root hash
        """
        # Construct coinbase transaction
        coinbase = unhexlify(self._coinb1) + \
                  unhexlify(self._extranonce1) + \
                  extranonce2_bin + \
                  unhexlify(self._coinb2)
        
        # Calculate initial merkle root
        merkle_root = double_sha256(coinbase)
        
        # Add merkle branches
        for branch in self._merkle_branches:
            merkle_root = double_sha256(merkle_root + unhexlify(branch))
        return merkle_root

    def stop(self):
        """Stop the mining process."""
        self._done = TRUE

    def mine(self, nonce_start=0, nonce_end=1, callback=NONE):
        """
        Execute mining process for the given nonce range.
        
        Args:
            nonce_start (int): Starting nonce value
            nonce_end (int): Ending nonce value
            callback (callable): Function to call when a share is found
        """
        start_time = time.time()
        
        # Generate random extranonce2
        extranonce2 = '{:0{}x}'.format(
            random.randint(0, 2**(8 * self.extranonce2_size) - 1),
            self.extranonce2_size * 2
        )
        extranonce2_bin = (struct.pack('<I', INT_FUNC(extranonce2, 16)) 
                          if self.extranonce2_size <= 4 
                          else struct.pack('<Q', INT_FUNC(extranonce2, 16)))
        
        # Calculate merkle root and construct block header
        merkle_root = self.merkle_root_bin(extranonce2_bin)
        header = (reverse_hex_word(self._version) +
                 reverse_hex_words(self._prevhash) +
                 merkle_root +
                 reverse_hex_word(self._ntime) +
                 reverse_hex_word(self._nbits))

        # Iterate through nonce range
        for nonce in RANGE_FUNC(nonce_start, nonce_end, 1):
            if self._done:
                self._dt += time.time() - start_time
                raise StopIteration

            # Calculate proof-of-work hash
            nonce_bin = struct.pack('<I', nonce)
            pow_hash = hexlify(
                self.proof_of_work(header + nonce_bin)[::-1]
            ).decode('utf-8')

            # Check if share meets target difficulty
            if INT_FUNC(pow_hash, 16) <= INT_FUNC(self.target, 16):
                result = {
                    JOB_ID: self.id,
                    'extranonce2': hexlify(extranonce2_bin),
                    NTIME: str(self._ntime),
                    'nonce': hexlify(nonce_bin[::-1])
                }
                self._dt += time.time() - start_time
                start_time = time.time()
                
                if callback is not NONE:
                    callback(result, self.hashrate)

            self._hash_count += 1

    def __str__(self):
        """String representation of the mining job."""
        return (f'<Job id={self.id} prevhash={self.prevhash} '
                f'coinb1={self.coinb1} coinb2={self.coinb2} '
                f'merkle_branches={self.merkle_branches} '
                f'version={self.version} nbits={self.nbits} '
                f'ntime={self.ntime} target={self.target} '
                f'extranonce1={self.extranonce1} '
                f'extranonce2_size={self.extranonce2_size}>')
class A6:
	_max_nonce=B
	def ProofOfWork(A):raise Q('Do not use the Subscription class directly, subclass it')
	class StateException(Q):0
	def __init__(A):A._id=B;A._difficulty=B;A._extranonce1=B;A._extranonce2_size=B;A._target=B;A._worker_name=B;A._mining_thread=B
	id=A(lambda s:s._id);worker_name=A(lambda s:s._worker_name);difficulty=A(lambda s:s._difficulty);target=A(lambda s:s._target);extranonce1=A(lambda s:s._extranonce1);extranonce2_size=A(lambda s:s._extranonce2_size)
	def set_worker_name(A,worker_name):
		if A._worker_name:raise A.StateException('Already authenticated as %r (requesting %r)'%A._username)
		A._worker_name=worker_name
	def _set_target(A,target):A._target=p%target
	def set_difficulty(B,difficulty):
		A=difficulty
		if A<0:raise B.StateException('Difficulty must be non-negative')
		D=A/65536.
		if A==0:C=2**256-1
		else:C=min(E((4294901760*2**(256-64)+1)/D-1+.5),2**256-1)
		B._difficulty=A;B._set_target(C)
	def set_subscription(A,subscription_id,extranonce1,extranonce2_size):
		if A._id is not B:raise A.StateException('Already subscribed')
		A._id=subscription_id;A._extranonce1=extranonce1;A._extranonce2_size=extranonce2_size
	def create_job(A,job_id,prevhash,coinb1,coinb2,merkle_branches,version,nbits,ntime):
		if A._id is B:raise A.StateException('Not subscribed')
		return j(job_id=job_id,prevhash=prevhash,coinb1=coinb1,coinb2=coinb2,merkle_branches=merkle_branches,version=version,nbits=nbits,ntime=ntime,target=A.target,extranonce1=A._extranonce1,extranonce2_size=A.extranonce2_size,proof_of_work=A.ProofOfWork,max_nonce=A._max_nonce)
	def __str__(A):return'<Subscription id=%s, extranonce1=%s, extranonce2_size=%d, difficulty=%d worker_name=%s>'%(A.id,A.extranonce1,A.extranonce2_size,A.difficulty,A.worker_name)
class A7(A6):
	import v3.xelisv2_hash as A8;ProofOfWork=A8.getPoWHash;_max_nonce=4294967295
	def _set_target(A,target):A._target=p%target
A9={T:A7}
class AA:
	def __init__(A,proxy,pool_host,pool_port,username,password,threads=4,algorithm=T):C=threads;A._proxy=proxy;A._pool_host=pool_host;A._pool_port=pool_port;A._username=username;A._password=password;A._threads_range=C if W(C,(list,l))else B;A._threads=C[0]if W(C,(list,l))else C;A._subscription=A9[algorithm]();A._job=[];A._ws=B;A._main_thread=B;A._accepted_shares=0;A._accepted_hash=0;A._queue=S.Queue();A._processes=[];A._hashrates=[];A._current_diff=0;A._current_job_id='N/A';A._current_job=B;A._last_submit_time=0;D=S.Manager();A.job_manager=D.dict()
	proxy=A(lambda s:s._proxy);pool_host=A(lambda s:s._pool_host);pool_port=A(lambda s:s._pool_port);username=A(lambda s:s._username);password=A(lambda s:s._password);threads=A(lambda s:s._threads);current_diff=A(lambda s:s._current_diff)
	def _set_threads(A):
		if A._threads_range is not B:A._threads=g.randint(A._threads_range[0],A._threads_range[1])
	def _console_log(A,hashrate,shared):
		if sys.stdout.isatty():
			os.system('clear')
		m('🟢　%s　|　⚙️　%s　|　🔀　%d　|　✅　%d　|　🚀　%s'%('ACTIVE',A._current_job_id,A.threads,shared,A5(hashrate)))
	def _spawn_job_thread(A,job_id,prevhash,coinb1,coinb2,merkle_branches,version,nbits,ntime):return A._subscription.create_job(job_id=job_id,prevhash=prevhash,coinb1=coinb1,coinb2=coinb2,merkle_branches=merkle_branches,version=version,nbits=nbits,ntime=ntime)
	def run(G,shared_data,nonce_start,nonce_end,callback):
		A=shared_data;F=B;D=B;E=B
		def H(result,hashrate):callback(result,hashrate*G.threads)
		def J(job,nonce_start,nonce_end,submit):
			try:job.mine(nonce_start=nonce_start,nonce_end=nonce_end,callback=submit)
			except Q as A:pass
		while I:
			C=A.get(Z)
			if C is not B and F!=C:
				F=C
				if D is not B:D.stop();E.join()
				F=C;K=A.get(q);L=A.get(r);M=A.get(s);N=A.get(t);O=A.get(u);P=A.get(v);R=A.get(a);S=A.get(w);T=A.get(x);U=A.get(y);V=A.get(z);D=j(job_id=C,prevhash=K,coinb1=L,coinb2=M,merkle_branches=N,version=O,nbits=P,ntime=R,target=S,extranonce1=T,extranonce2_size=U,max_nonce=V,proof_of_work=G._subscription.ProofOfWork);E=f.Thread(target=J,args=(D,nonce_start,nonce_end,H));E.daemon=I;E.start()
	def queue_message(A):
		while I:
			if not A._queue.empty():B=A._queue.get();A._accepted_hash=B[A0];A._ws.send(B[A1])
			else:F.sleep(.25)
	def on_open(A,ws):
		G={J:b,K:b,L:['python-pepepow/3.0']};ws.send(C.dumps(G)+N);B=f.Thread(target=A.queue_message);B.daemon=I;B.start()
		def H(shared,hashrate):D='ascii';B=shared;E={J:c,K:c,L:[A.username,B[Z],B['extranonce2'].decode(D),B[a],B['nonce'].decode(D)]};A._queue.put({A1:C.dumps(E)+N,A0:hashrate})
		for D in X(A.threads):M=D*A._subscription._max_nonce//A.threads;O=(D+1)*A._subscription._max_nonce//A.threads-1;P=S.Process(target=A.run,args=(A.job_manager,M,O,H),daemon=I);P.start()
	def handle_message(A,ws,message):
		try:A.on_message(ws,message)
		except Q as B:m(B)
	def on_message(A,ws,message):
		R='mining.extranonce.subscribe';Q='mining.authorize';S=message.split(N)
		for T in S:
			if not T.strip():continue
			I=C.loads(T);D=I.get(K)or I.get(J);H=I.get(L)or I.get('result');W=I.get('error')or B
			if D==c:
				A._last_submit_time=E(F.time()*1000)
				if W is B:A._accepted_shares+=1;G('Accepted shares: %d'%A._accepted_shares);A._console_log(A._accepted_hash,A._accepted_shares)
			elif D==Q:A._subscription.set_worker_name(A.username)
			elif D=='mining.set_difficulty':O,=H;A._current_diff=O;A._subscription.set_difficulty(O);G('Change difficulty: difficulty=%s'%O)
			elif D==b:(n,U),X,Y=H;A._subscription.set_subscription(U,X,Y);G('Subscribed: subscription_id=%s'%U);d={J:R,K:R,L:[]};ws.send(C.dumps(d)+N);e={J:Q,K:Q,L:[A.username,A.password]};ws.send(C.dumps(e)+N)
			elif D=='mining.notify':
				if M(H)!=9:raise A.MinerWarning('Malformed mining.notify message',S)
				P,f,g,h,i,j,k,l,m=H;G('New job: %s'%P);A._current_job_id=P;A._console_log(A._accepted_hash,A._accepted_shares);A.job_manager.update({Z:P,q:f,r:g,s:h,t:i,u:j,v:k,a:l,'clean_jobs':m,w:A._subscription.target,x:A._subscription._extranonce1,y:A._subscription.extranonce2_size,z:4294967295})
			elif D=='mining.set_extranonce':V,=H;A._subscription.set_extranonce(V);G('New extranonce: %s'%V)
			elif D==R:G('Extranonce Subscribe: %s'%H)
	def on_error(A,ws,msg):0
	def on_close(A,b):0
	def serve_forever(A):h.enableTrace(o);A._ws=h.WebSocketApp(A.proxy,on_open=A.on_open,on_message=A.handle_message,on_error=A.on_error,on_close=A.on_close);A._console_log(0,0);A._ws.run_forever()
if __name__=='__main__':
	D=A3('data.txt');P=O.argv[1]if M(O.argv)>1 else B
	if P:D[Y]=C.loads('[{}]'.format(P))if','in P else E(P)
	AC=AA(D['proxy'],D['host'],D[n],D['username'],D['password'],D[Y],'xelisv2_pepew');AC.serve_forever()
